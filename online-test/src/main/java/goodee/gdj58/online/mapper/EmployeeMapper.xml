<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- Employee.java interface안에 적어도 되지만 유지보수? -->
<!-- namespace: 인터페이스(EmployeeMapper) 이름 보고 xml과 합친다.-->
<mapper namespace="goodee.gdj58.online.mapper.EmployeeMapper">
	<!-- 직원 로그인 -->
	<select id="login" parameterType="goodee.gdj58.online.vo.Employee" resultType="goodee.gdj58.online.vo.Employee">
		SELECT
			emp_id empId
			, emp_name empName
		FROM
			employee
		WHERE emp_id = #{empId} AND emp_pw = PASSWORD(#{empPw})  
	</select>
	
	<!-- 직원 삭제 -->
	<delete id="deleteEmployee" parameterType="int">
		DELETE FROM employee WHERE emp_no = #{empNo}
	</delete>
	
	<!-- 직원 등록 -->
	<!-- INSERT UPDATE DELETE ==> resultType X, 자동으로 int 반환 -->
	<insert id="insertEmployee" parameterType="goodee.gdj58.online.vo.Employee">
		INSERT INTO employee(
			emp_id
			, emp_pw
			, emp_name
		) VALUES (
			#{empId} <!-- getEmpId -->
			, PASSWORD(#{empPw})
			, #{empName}
		)
	</insert>
	
	<!-- 직원 목록 -->
	<!-- select 각 행을 resultType으로 -->
	<select id="selectEmployeeList" parameterType="java.util.Map" resultType="goodee.gdj58.online.vo.Employee">
		SELECT
			emp_no empNo <!-- rs.getInt("empNo"), new Employee().setEmpNo() -->
			, emp_id empId
			, emp_name empName
		FROM employee
		ORDER BY emp_no DESC
		LIMIT #{beginRow}, #{rowPerPage}
	</select>
	
</mapper>