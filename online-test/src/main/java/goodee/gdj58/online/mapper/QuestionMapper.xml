<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="goodee.gdj58.online.mapper.QuestionMapper">

	<!-- 가장 최근 문제 코드 -->
	<select id="selectMaxQuestionNo" resultType="int">
		SELECT MAX(question_no) questionNo FROM question
	</select>
	
	<!-- 문제 등록 -->
	<insert id="insertQuestion" parameterType="goodee.gdj58.online.vo.Question">
		INSERT INTO question(test_no, question_idx, question_title) VALUES(#{testNo}, #{questionIdx}, #{questionTitle})
	</insert>

	<!-- 해당 시험 문제 정보 -->
	<select id="selectQuestionListByTest" parameterType="java.util.Map" resultType="java.util.Map">
		SELECT
			q.question_no questionNo
			, q.test_no testNo
			, question_idx questionIdx
			, question_title questionTitle
			, example_idx exampleIdx
			, example_title exampleTitle
			, example_ox exampleOx
		FROM question q
		JOIN example e ON q.question_no = e.question_no
		JOIN test t ON q.test_no = t.test_no
		WHERE q.test_no = #{testNo} AND teacher_no = #{teacherNo}
	</select>
</mapper>